# Example calculation

This example uses Snowplow TCO Model and Knitr to produce a report on costs for some present and future workload. 

To run in you need the knitr package installed:
```{r, eval=FALSE}
install.packages("knitr")
library(knitr)
knit2html("example.Rmd")
```

```{r}
library("reshape")
library("ggplot2")
```

## Cost for a current workload

Assume:
 
- 10,000,000 events per month
- 1,000,000 users 
- 1 run per day 
- data stored in Redshift
- 12 months
- Using Clojure collector on EC2 rather than Cloudfront collector

```{r setoptions,tidy=TRUE}
costModelNow <- snowplowCostByMonth(1000000, 10000000, 1, 'redshift', 12, 10000, 'clojure')
round(costModelNow)
sum(costModelNow$totalCost)

costs <- costModelNow[c(1:7)] 
costs <- melt(costs, id="month")
p <- ggplot(costs, aes(x=month, y=value, fill=variable))
p <- p + geom_bar(stat="identity")
p
```

## Cost for a future workload

Assume:

- 100,000,000 events per month
- 10,000,000 users
- 1 run per day
- data stored in Redshift
- 12 months
- Using Clojure collector on EC2 rather than Cloudfront collector

```{r}
costModelFuture <- snowplowCostByMonth(10000000, 100000000, 1, 'redshift', 12, 10000, 'clojure')
round(costModelFuture)
sum(costModelFuture$totalCost)

costs <- costModelFuture[c(1:7)] 
costs <- melt(costs, id="month")
p <- ggplot(costs, aes(x=month, y=value, fill=variable))
p <- p + geom_bar(stat="identity")
p
```






